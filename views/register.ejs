<!DOCTYPE html>
<html lang="es-ES">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - VoltiaDrive</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script defer src="/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/register.css">
</head>
<body>
    <div class="container-full">
        <div class="container container-register">
            <h1 class="text-center pb-3">Crear cuenta</h1>

            <% if (error) { %>
                <div class="alert alert-danger"><%= error %></div>
            <% } %>
            <% if (success) { %>
                <div class="alert alert-success"><%= success %></div>
            <% } %>
            
            <!--En los campos ponemos el typeof undefined para que el input no muestre nunca la palabra undefined-->
            <form action="/register" method="POST" class="registerForm" novalidate>
                <div class="row g-3">
                    <div class="col-md-6 col-lg-4">
                        <label for="nombre" class="form-label required">Nombre</label>
                        <input type="text" name="nombre" id="nombre" class="form-control" value="<%= typeof nombre !== 'undefined' ? nombre : '' %>" required>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <label for="correo" class="form-label required">Correo</label>
                        <input type="email" name="correo" id="correo" class="form-control" 
                               placeholder="tuemail@ejemplo.com" value="<%= typeof correo !== 'undefined' ? correo : '' %>" required>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <label for="contraseña" class="form-label required">Contraseña</label>
                        <input type="password" name="contraseña" id="contraseña" class="form-control"
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$"
                               title="Mín. 8 caracteres, 1 mayúscula, 1 minúscula y 1 número" required>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="tel" name="telefono" id="telefono" class="form-control"
                               maxlength="9" pattern="[0-9]{9}"
                               oninput="this.value=this.value.replace(/[^0-9]/g,'')"
                               value="<%= typeof telefono !== 'undefined' ? telefono : '' %>">
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <label for="id_concesionario" class="form-label required">Concesionario</label>
                        <select name="id_concesionario" id="id_concesionario" class="form-select" required>
                            <option value="">-- Seleccionar --</option>
                            <% concesionarios.forEach(c => { %>
                                <option value="<%= c.id_concesionario %>" 
                                    <%= typeof id_concesionario !== 'undefined' && id_concesionario == c.id ? 'selected' : '' %>>
                                    <%= c.nombre %>
                                </option>
                            <% }) %>
                        </select>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <button type="submit" class="btn btn-primary mt-4 w-50">Crear cuenta</button>
                </div>
                <div class="text-center mt-3">
                    <a href="/html/inicioSinLogin.html" class="btn btn-primary">Volver al inicio</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>